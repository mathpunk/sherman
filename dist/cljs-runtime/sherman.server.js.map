{"version":3,"file":"sherman.server.js","sources":["sherman/server.cljs"],"mappings":";;;;;;AAMA,GAAA,OAASA;AAAT;AAAA,AAAA,AAASA,yBAAQ,uGAAA,2CAAA,jJAACC,oDAAAA,+DAAAA;;AAClB,GAAA,OAASC;AAAT;AAAA,AAAA,AAASA,sBAAK,uGAAA,wCAAA,9IAACD,oDAAAA,4DAAAA;;AAGf,AAAKE,qBAAI,CAACH,uDAAAA,yDAAAA;AAGV,4BAAA,5BAAMI,gEAAYC,IAAIC,IAAIC,MAAMC;AAAhC,AACE,IAAMC,UAAQ,AAACC,sBAAcH,MAAMC;AAAnC,AACE,OAAGF,SAAUG;;AAGjB,uBAAA,vBAAGN,sCACS,WAAKE,IAAIC;AAAT,AACE,mEAAA,5DAACF,0BAAWC,IAAIC,IAAIK;;AAGlC,uBAAA,vBAAGR,qCACS,WAAKE,IAAIC;AAAT,AACE,mEAAA,5DAACF,0BAAWC,IAAIC,IAAIK;;AAGlC,uBAAA,vBAAGR,+BACS,WAAKE,IAAIC;AAAT,AACE,6DAAA,tDAACF,0BAAWC,IAAIC,IAAIM;;AAGlC,AAAA,sBAAA,8BAAAC,pDAAMM;AAAN,AAAA,IAAAL,qBAAA;AAAA,AAAA,IAAAC,0BAAA,AAAA;AAAA,AAAA,IAAAC,wBAAA;;AAAA,AAAA,GAAA,CAAAA,wBAAAD;AAAA,AAAA,AAAAD,wBAAA,CAAA,UAAAE;;AAAA,eAAA,CAAAA,wBAAA;;;;AAAA;;;;AAAA,IAAAC,uBAAA,EAAA,CAAA,MAAA,AAAAH,4BAAA,AAAA,KAAAI,qBAAA,AAAAJ,yBAAA,KAAA,IAAA,OAAA;AAAA,AAAA,OAAAK,yDAAAF;;;AAAA,AAAA,AAAA,AAAAE,2DAAA,WAAcG;AAAd,AACE,WAAA,PAAMC;AAAN,AACE,AAACC,yGAAQ,CAAA,+EAAwCD;;AACjD,IAAAE,WAAM,iCAAA,jCAAevB;kBAAfwB,iBAAAC;AAAA,AAAqB,4GAAAD,iBAAAC,iDAAAD,iBAAAC,vLAACxB,mDAAAA,sFAAAA;;;AAA5B,AACE,AAAAsB,gBAAA;;AADFA;;;AAHJ,AAAA,AAAAN,8CAAA;;AAAA,AAAA,AAAAA,wCAAA,WAAAC;AAAA,AAAA,OAAAD,yDAAA,AAAAE,cAAAD;;;AAAA","names":["sherman.server/express","cljs.nodejs/require","sherman.server/http","sherman.server/app","sherman.server/send-trace","req","res","rules","sentence","message","sherman.grammar/trace","sherman.magic/magic-rules","sherman.oaths/rules","var_args","args__6412__auto__","len__6405__auto__","i__6406__auto__","argseq__6413__auto__","cljs.core/IndexedSeq","sherman.server/main","seq28474","cljs.core/seq","args","port","cljs.core.println.cljs$core$IFn$_invoke$arity$variadic","G__28475","p1__28472#","p2__28473#"],"sourcesContent":["(ns sherman.server\n  (:require [sherman.grammar :as grammar]\n            [sherman.magic :as magic]\n            [sherman.oaths :as oaths]\n            [cljs.nodejs :as nodejs]))\n\n(defonce express (nodejs/require \"express\"))\n(defonce http (nodejs/require \"http\"))\n\n\n(def app (express))\n\n\n(defn send-trace [req res rules sentence]\n  (let [message (grammar/trace rules sentence)]\n    (. res (send message))))\n\n\n(. app (get \"/magic/spell\"\n            (fn [req res]\n              (send-trace req res magic/magic-rules \"spell\"))))\n\n\n(. app (get \"/magic/item\"\n            (fn [req res]\n              (send-trace req res magic/magic-rules \"item\"))))\n\n\n(. app (get \"/oath\"\n            (fn [req res]\n              (send-trace req res oaths/rules \"oath\"))))\n\n\n(defn main [& args]\n  (let [port 3000]\n    (println (str \"Serving magic and oaths on port \" port))\n    (doto (.createServer http #(app %1 %2))\n      (.listen 3000))))\n"]}